# DengYanPoker - 干瞪眼游戏

一个用Python实现的干瞪眼扑克游戏，支持人机对战和AI对战。

## 🚀 快速开始

### 运行游戏
```bash
# 运行完整游戏（支持人类玩家）
python main.py

# 运行AI演示游戏
python examples/demo_game.py

# 运行测试
python tests/test_game.py
```

### 项目结构
```
DengYanPoker/
├── src/                     # 核心源代码
│   ├── __init__.py         # 包初始化文件
│   ├── card.py             # 牌类和牌型定义
│   ├── pattern_analyzer.py # 牌型分析器
│   ├── player.py           # 玩家类（人类和AI）
│   └── game.py             # 游戏主逻辑
├── tests/                   # 测试文件
│   ├── __init__.py
│   └── test_game.py        # 游戏测试
├── examples/                # 示例文件
│   └── demo_game.py        # AI演示游戏
├── main.py                 # 主入口文件
├── setup.py                # 包安装配置
├── requirements.txt        # 依赖文件
├── LICENSE                 # 许可证
├── .gitignore             # Git忽略文件
└── README.md              # 说明文档
```

## 🎮 一、基础玩法流程
干瞪眼的基本流程如下：

洗牌 + 发牌

使用 一副牌（54张）。

3人玩时，每人发 17 张牌，3张留作底牌（通常弃用）。

也可以设置为 2人/4人。

确定出牌顺序

随机一个玩家先手出牌。

轮流出牌

每轮必须出与上家相同类型的牌且大于上家。

无法出者必须 跳过（pass）。

如果所有人都跳过，最后出牌者获得新一轮出牌权。

游戏胜利

谁 先出完所有手牌，谁就赢了。

♠️ 二、出牌类型（牌型分类）
你需要为程序设计以下牌型：

牌型	示例	说明
单张	A	任意单张
对子	77	两张一样的
顺子	34567	5张及以上连续的牌，不包含 2 和大小王
三张	888	三张一样的
三带一	888 + 9	三张一样带一张任意牌
炸弹	4444	四张一样的
王炸	🃏🃏	双王，最大

注意：

不能出不同类型的牌去压制（比如不能用对子压单张）

顺子不能包括 2 和王

炸弹可压任意非炸弹牌，王炸最大

🔍 三、牌型比较规则
✅ 同类型比较
类型	比较方式
单张	比牌点：3 < 4 < ... < A < 2 < 小王 < 大王
对子	同上
顺子	比顺子的最大点数
三张	比三张的点数
三带一	比三张部分的点数
炸弹	比四张的点数
王炸	无敌最大

✅ 炸弹可压一切（除了更大的炸弹）
任何非炸弹都可被炸弹压制

王炸最大，不可被压

🧠 四、出牌逻辑（流程设计）
每个玩家在自己回合：

判断是否需要接牌

有上家牌：只能接相同类型、比它大的牌型

无上家牌：自由出任意牌

从手牌中找到所有可出的牌型

使用牌型解析算法提取所有合法组合

使用比较逻辑找出哪些可以压过上家的

选择最优出牌（AI / 玩家手动）

玩家手动选择

AI 根据策略选择（如“能压最小就压”）

若无法出牌 → pass

🏁 五、胜负逻辑
玩家手牌出完即胜

也可以设置积分制，比如赢了加积分，炸弹额外加分等（进阶）

## 🤖 AI策略

游戏实现了三种不同的AI策略：

- **保守AI (conservative)**: 优先出小牌，保留大牌和炸弹
- **激进AI (aggressive)**: 优先出大牌和炸弹，快速压制对手
- **智能AI (smart)**: 根据手牌数量和局面动态调整策略

## ✨ 技术特性

- **完整的牌型识别**: 支持所有干瞪眼牌型（单张、对子、顺子、三张、三带一、炸弹、王炸）
- **智能牌型分析**: 自动识别手牌中所有可能的牌型组合
- **多种AI策略**: 三种不同风格的AI玩家
- **灵活的游戏配置**: 支持2-4人游戏，可配置人类和AI玩家数量
- **清晰的游戏界面**: 命令行界面，显示详细的游戏状态和出牌信息

## 🎯 使用示例

### 人机对战
```python
# 运行 game.py，选择玩家数量和人类玩家数量
python game.py
```

### AI对战观察
```python
# 运行 demo_game.py 观察AI之间的对战
python demo_game.py
```

### 自定义游戏
```python
from game import DengYanGame
from player import HumanPlayer, AIPlayer

# 创建自定义游戏
game = DengYanGame(3)
game.players = [
    HumanPlayer("玩家1"),
    AIPlayer("AI保守", "conservative"),
    AIPlayer("AI激进", "aggressive")
]
game._shuffle_and_deal()
game.play_game()
```

## 🔧 扩展计划

- [ ] 图形界面 (Tkinter/Pygame)
- [ ] Web界面 (Flask)
- [ ] 更多AI策略
- [ ] 积分系统
- [ ] 游戏回放功能
- [ ] 网络对战支持

## 📝 开发说明

项目采用面向对象设计，主要模块：

- `Card`: 扑克牌和牌型的基础类
- `PatternAnalyzer`: 牌型识别和分析算法
- `Player`: 玩家基类，包含人类玩家和AI玩家
- `DengYanGame`: 游戏主控制器，管理游戏流程

代码结构清晰，易于扩展和维护。